<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Word-Editor</title>
    <link rel = "icon" href="img/s.gif" type="image/x-icon">
	<link rel="stylesheet" href="css/style.css" type="text/css" />	
    
    <!---Alert--->
    <link rel="stylesheet" href="../../alertify.js-0.3.11/themes/alertify.core.css" />
	<link rel="stylesheet" href="../../alertify.js-0.3.11/themes/alertify.default.css" />
    <script src="../../alertify.js-0.3.11/lib/alertify.min.js"></script>
    
    <!-- Ignite UI for jQuery Required Combined CSS Files -->
    <link href="http://cdn-na.infragistics.com/igniteui/2023.1/latest/css/themes/infragistics/infragistics.theme.css" rel="stylesheet" />
    <link href="http://cdn-na.infragistics.com/igniteui/2023.1/latest/css/structure/infragistics.css" rel="stylesheet" />

    <script src="http://ajax.aspnetcdn.com/ajax/modernizr/modernizr-2.8.3.js"></script>
    <script src="http://code.jquery.com/jquery-1.11.3.min.js"></script>
    <script src="http://code.jquery.com/ui/1.11.1/jquery-ui.min.js"></script>

    <!-- Ignite UI for jQuery Required Combined JavaScript Files -->
    <script src="http://cdn-na.infragistics.com/igniteui/2023.1/latest/js/infragistics.core.js"></script>
    <script src="http://cdn-na.infragistics.com/igniteui/2023.1/latest/js/infragistics.lob.js"></script>
	
    <!-- Local File -->
    <script src="js/script.js"></script>
    
</head>
<body>
<div class="header" style="background-color:#AA205C">
       <a href="../../index.html" title="Home"><img src="img/s.gif" style="max-width: 2%; max-height: 3%; float:left"/></a>
       <button class="btn signup btnEffect" onClick="window.location='../server/index.html'" title="Go back to main library" style="background:#AA205C; color:#EEE; float:right">
     	<img src="img/back.gif" style="max-width:10px" />Back</button>
       <button class="btn signup btnEffect" onClick="window.print()" title="Print this page" style="background:#AA205C; color:#EEE; float:right">
     	<img src="img/print.gif" style="max-width:10px" />Print</button>
        <button class="btn signup btnEffect" onClick="window.location='index.html'" title="Print this page" style="background:#AA205C; color:#EEE; float:right">
     	<img src="img/settings.gif" style="max-width:10px" />Refresh</button>    
    </div>    
    <br /><br /><br><br><br>


    
    <!--igHtmlEditor target element-->
    <div id="htmlEditor">
        Use the fastest jQuery grid on the market to get more interactivity out of your static HTML tables and data. Our latest iteration offers more line of business features, along with our unrivalled quality and performance.
    </div>

    <div id="toolbarHolder">
        <div id="text"></div>
    </div>
    
    <style>
    	#htmlEditor {
            margin-bottom: 10px;
        }

        #text_collapseButton,
        #formatting_collapseButton {
            display: none;
        }

        #toolbarHolder {
            z-index: 99999;
        }

		/* Override sample's browser styles */
    	#htmlEditor h1, #htmlEditor h2, #htmlEditor h3, #htmlEditor h4, #htmlEditor h5, #htmlEditor h6 { margin: 0px; }
    	#htmlEditor h1 { font-size: 1.9em; }
		#sampleContainer { overflow: visible; }
    
    </style>
    
    <script>
		function getSelectionCoords() {
            var sel = window.frames[0].document.selection, range;
            var x = 0, y = 0;
            if (sel) {
                if (sel.type != "Control") {
                    range = sel.createRange();
                    range.collapse(true);
                    x = range.boundingLeft;
                    y = range.boundingTop;
                }
            } else if (window.frames[0].document.getSelection) {
                sel = window.frames[0].document.getSelection();
                if (sel.rangeCount) {
                    range = sel.getRangeAt(0).cloneRange();
                    if (range.getClientRects) {
                        range.collapse(true);
                        var rect = range.getClientRects()[0];
                        if (rect) {
                            x = rect.left;
                            y = rect.top;
                        }
                    }
                }
            }

            return {
                x: x,
                y: y + 118
            };
        }

        function selectionIs(sel, state) {
            var range, isState = false;
            if (window.frames[0].document.getSelection) {
                if (sel && sel.getRangeAt && sel.rangeCount) {
                    range = sel.getRangeAt(0);
                    sel.removeAllRanges();
                    sel.addRange(range);
                }
            }
            if (window.frames[0].document.queryCommandState) {
                isState = window.frames[0].document.queryCommandState(state);
            }
            return isState;
        }

        $(function () {
            var $iframe,
                mouseMoveCoord,
                $htmlEditor = $("#htmlEditor"),
                $toolbarHolder = $("#toolbarHolder"),
                $textToolbar = $('#text'),
                height = $('html').hasClass('touch') ? 500 : 350;

            $toolbarHolder.hide();

            $htmlEditor.igHtmlEditor({
                width: "99%",
                height: height,
                inputName: "htmlEditor"
            });

            $textToolbar.igToolbar({
                "name": "textToolbar",
                "displayName": "Toolbar text",
                "isExpanded": true,
                "collapseButtonIcon": "ui-igbutton-collapse",
                "expandButtonIcon": "ui-igbutton-expand",
                "items": [{
                    "name": "Bold",
                    "type": "button",
                    "scope": null,
                    "props": {
                        "allowToggling": {
                            "value": true
                        },
                        "isBold": {
                            "value": false,
                            "action": "_isSelectedAction"
                        },
                        "boldButtonTooltip": {
                            "value": "Bold",
                            "action": "_tooltipAction"
                        },
                        "boldButtonIcon": {
                            "value": "ui-igbutton-bold",
                            "action": "_buttonIconAction"
                        }
                    }
                }, {
                    "name": "Italic",
                    "type": "button",
                    "props": {
                        "isItalic": {
                            "value": false,
                            "action": "_isSelectedAction"
                        },
                        "italicButtonTooltip": {
                            "value": "Italic",
                            "action": "_tooltipAction"
                        },
                        "italicButtonIcon": {
                            "value": "ui-igbutton-italic",
                            "action": "_buttonIconAction"
                        }
                    }
                }, {
                    "name": "Underline",
                    "type": "button",
                    "props": {
                        "isUnderline": {
                            "value": false,
                            "action": "_isSelectedAction"
                        },
                        "underlineButtonTooltip": {
                            "value": "Underline",
                            "action": "_tooltipAction"
                        },
                        "underlineButtonIcon": {
                            "value": "ui-igbutton-underline",
                            "action": "_buttonIconAction"
                        }
                    }
                }]
            });

            $iframe = $('#htmlEditor_editor');

            $iframe.contents().find("body").on("mouseup", function (ev) {
                var userSelection,
                    userSelectionString,
                    $bold = $textToolbar.find("div[id*='Bold']"),
                    $italic = $textToolbar.find("div[id*='Italic']"),
                    $underline = $textToolbar.find("div[id*='Underline']"),
                    coord = getSelectionCoords();

                if (window.frames[0].document.getSelection) {
                    userSelection = window.frames[0].document.getSelection();
                    userSelectionString = userSelection.toString();
                } else {
                    userSelection = window.frames[0].document.selection.createRange();
                    userSelectionString = userSelection.text;
                }
                if (userSelectionString !== "") {
                    $toolbarHolder.parent().css({
                        position: 'relative'
                    });

                    $toolbarHolder.css({
                        top: coord.y,
                        left: coord.x,
                        position: 'absolute'
                    });

                    mouseMoveCoord = {
                        x: ev.pageX,
                        y: ev.pageY
                    };

                    if (selectionIs(userSelection, "bold")) {
                        $bold.igToolbarButton("activate");
                    }

                    if (selectionIs(userSelection, "italic")) {
                        $italic.igToolbarButton("activate");
                    }

                    if (selectionIs(userSelection, "underline")) {
                        $underline.igToolbarButton("activate");
                    }

                    $iframe.contents().find("body").on("mousemove", function (ev) {
                        if (userSelectionString !== "") {
                            if (mouseMoveCoord &&
                                ((Math.abs(mouseMoveCoord.x - ev.pageX) > 50) ||
                                (Math.abs(mouseMoveCoord.y - ev.pageY) > 50))) {
                                
                                $toolbarHolder.fadeOut();
                            } else {
                                $toolbarHolder.fadeIn();
                            }
                        }
                    });

                    $iframe.contents().find("body").on("keydown", function (ev) {
                        if (ev.keyCode === 66 && ev.ctrlKey) {
                            $bold.igToolbarButton("toggle");
                        }

                        if (ev.keyCode === 73 && ev.ctrlKey) {
                            $italic.igToolbarButton("toggle");
                        }

                        if (ev.keyCode === 85 && ev.ctrlKey) {
                            $underline.igToolbarButton("toggle");
                        }
                    });

                    $toolbarHolder.fadeIn();                   
                } else {
                    $iframe.contents().find("body").off("mousemove");
                    $iframe.contents().find("body").off("keydown")

                    $toolbarHolder.hide();
                    if ($bold.igToolbarButton) {
                        $bold.igToolbarButton("deactivate");
                    }

                    if ($italic) {
                        $italic.igToolbarButton("deactivate");
                    }

                    if ($underline) {
                        $underline.igToolbarButton("deactivate");
                    }
                }
            });

            $(document).on("igtoolbarbuttonclick", function (ev) {
                var command = $(ev.target).attr("id").replace($textToolbar.attr("id") + "_item_", "");
                $htmlEditor.igHtmlEditor("executeAction", command.toLowerCase());
            });

            $(document).on("ightmleditoractionexecuting", function (ev, ui) {
                var $button = $textToolbar.find("div[id*='" + ui.actionName + "']");

                if ($button.igToolbarButton) {
                    $textToolbar.find("div[id*='" + ui.actionName + "']").igToolbarButton("toggle");
                }
            });
        });
		
	
	</script>
<!---------------------------Footer---------------------------------------------------->     

<footer align="center" style="position:relative; color:#AA205C; bottom: 0; width: 100%;">
	<center> <font color="#AA205C">
   		<p id="date"> </p>
   	<script>
		document.getElementById("date").innerHTML = Date();
   </script> </font></center><p>|| Copyright protected &copy; <script>document.write(new Date().getFullYear())</script>, All Rights Not Reserved ||</p><p> Design by Sayantan Kundu</p>
</footer>

	<center>
       <span onClick="return(view());" title="About Us" ><font style="font-size: 20px;" color="#AA205C"></font><img src="img/LOADING.gif" style="width:50px"></span>
    </center>

</body>
</html>